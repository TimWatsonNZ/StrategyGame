!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e){const n=document.createElement("canvas"),o=500;n.width=o,n.height=o,document.getElementById("root").appendChild(n);const r=n.getContext("2d");function l(t,e){this.x=t,this.y=e}function i(t,e,n){this.point=new l(t,e),this.selected=!1,this.type=n}const s=10,y=o/s,c=new l(0,40);new l(0,0);let a=null;let u=[];for(let t=0;t<y;t++){const e=[];for(let n=0;n<y;n++)e.push(new i(n*s,t*s,"blank"));u.push(e)}for(let t=0;t<80;t++){u[Math.floor(Math.random()*u.length)][Math.floor(Math.random()*u.length)].type="grass"}function p(t,e){const n=[];return e[t.y][t.x]?([{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},,{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}].forEach(o=>{const r=t.x+o.x,l=t.y+o.y;r<0||r>e.length-1||l<0||l>e.length-1||n.push(e[l][r])}),n):n}const f=t=>new l(t.point.x/s,t.point.y/s);u[Math.round(u.length/2)][Math.round(u.length/2)].type="grass";const d=(t,e)=>{const n=[];for(let o=0;o<y;o++){const r=[];for(let n=0;n<y;n++){const l=t[o][n],i=p(f(l),t),s=i.filter(t=>"water"===t.type).length,y=i.filter(t=>"grass"===t.type).length,c={...l};c.type=e(c,s,y),r.push(c)}n.push(r)}return n},h=(t,e,n)=>"water"===t.type&&n>3?"grass":"grass"===t.type&&e>7?"water":t.type,x=(t,e,n)=>"water"===t.type&&n>0?"grass":t.type;(function(t){const e=[t];for(;e.length>0;){const t=e.pop(),n=p(f(t),u),o=n.filter(t=>"water"===t.type).length,r=n.filter(t=>"grass"===t.type).length;Math.round(Math.random()*(o+r))>o?t.type="grass":t.type="water",n.filter(t=>"blank"===t.type).forEach(t=>e.push(t))}})((u=d(u=d(u,x),x))[Math.round(u.length/2)][Math.round(u.length/2)]),u=d(u=d(u,h),h),console.log(u.reduce((t,e)=>t+e.filter(t=>"water"===t.type).length,0));const g=c.x+o,w=c.y+o;let F=M();function M(){const t=[],e=new l(c.x,c.y),n=new l(e.x+o,e.y+o);for(let o=e.y;o<=n.y;o+=s){const r=[],i=u[Math.round(o/s)];if(i)for(let t=e.x;t<=n.x;t+=s){const e=i[Math.round(t/s)];if(e&&e.point){const t={...e};t.point=new l(e.point.x,e.point.y),t.point.x-=c.x,t.point.y-=c.y,r.push(t)}}t.push(r)}return t}function b(){r.fillStyle="#FFFFFF",r.fillRect(0,0,o,o),r.fillStyle="#000000";for(let t=0;t<F.length;t++)for(let e=0;e<F[t].length;e++){const n=F[t][e];n&&n.point.x<=g&&n.point.x+s>0&&n.point.y+s>=0&&n.point.y<w&&("grass"===n.type&&(r.fillStyle="#00FF00"),"water"===n.type&&(r.fillStyle="#0000FF"),"blank"===n.type&&(r.fillStyle="#FFFFFF"),r.fillRect(n.point.x,n.point.y,s,s),n.selected&&(r.strokeStyle="#000000",r.strokeRect(n.point.x,n.point.y,s,s),r.strokeStyle="#FFFFFF"))}}b(),n.addEventListener("click",t=>{let{clientX:e,clientY:n}=t;e-=8,n-=8;const o=Math.floor(e/s),r=Math.floor(n/s),l=F[r][o];document.querySelector("#selectedTile").textContent=`${o}, ${r}, ${l.type}`,l&&(a&&(a.selected=!1),a=l,l.selected=!0,b())});let m=0;const k=new l(0,0),v=0,S=1,C=2;n.addEventListener("mousedown",t=>{m=v;let{clientX:e,clientY:n}=t;e-=8,n-=8,k.x=e,k.y=n},!1),n.addEventListener("mousemove",()=>{m===v&&(m=S)},!1),n.addEventListener("mouseup",t=>{if(m===v);else if(m===S){let{clientX:e,clientY:n}=t;e-=8,n-=8;const o=k.x-e,r=k.y-n;(Math.abs(o)>1||Math.abs(r)>1)&&(c.x+=Math.round(o),c.y+=Math.round(r),k.x=0,k.y=0,F=M(),b())}m=C},!1),window.addEventListener("keyup",t=>{37===t.keyCode&&c.x++,38===t.keyCode&&c.y++,39===t.keyCode&&c.x--,40===t.keyCode&&c.y--,t.keyCode,t.keyCode,console.log(t.keyCode),F=M(),b()})}]);